[gd_scene load_steps=29 format=3 uid="uid://cbodjjoib2qrn"]

[ext_resource type="Script" uid="uid://bi5nwihkqq2pp" path="res://scenes/characters/player.gd" id="1_rp718"]
[ext_resource type="Texture2D" uid="uid://dylf6bubhlan2" path="res://sprites/units/additional_textures/shadow.png" id="2_3wg1y"]
[ext_resource type="Texture2D" uid="uid://c418dki3gw0y7" path="res://sprites/units/additional_textures/selection.png" id="2_d6tgn"]
[ext_resource type="Texture2D" uid="uid://dhw3owys25v6j" path="res://sprites/mimi/mimi_low_hair3.png" id="3_d6tgn"]
[ext_resource type="Texture2D" uid="uid://b5m1qu00df4mp" path="res://sprites/mimi/new_body.png" id="4_3wg1y"]
[ext_resource type="Shader" uid="uid://dde0kqx4ndsel" path="res://vfx/hitflash.gdshader" id="4_jk2m4"]
[ext_resource type="Texture2D" uid="uid://ddq0687b6xvwy" path="res://sprites/mimi/mimi_head3.png" id="5_3wg1y"]
[ext_resource type="Texture2D" uid="uid://v251r1xeidh3" path="res://sprites/mimi/mimi_oko_open2.png" id="6_a2luo"]
[ext_resource type="Texture2D" uid="uid://bpc6yxqx75n7q" path="res://sprites/mimi/mimi_oko_closed2.png" id="7_eir2k"]
[ext_resource type="Texture2D" uid="uid://br2gxw4fjvdyv" path="res://sprites/mimi/mimi_ahoge3.png" id="8_kmyvj"]
[ext_resource type="Texture2D" uid="uid://dqr328wqveed2" path="res://sprites/mimi/new_left_arm.png" id="9_a2luo"]
[ext_resource type="Texture2D" uid="uid://bwwvia3so8b5l" path="res://sprites/mimi/new_right_arm.png" id="10_eir2k"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xhtjm"]
shader = ExtResource("4_jk2m4")
shader_parameter/color = Color(1, 1, 1, 1)
shader_parameter/progress = 0.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_3wg1y"]
radius = 23.0
height = 78.0

[sub_resource type="Animation" id="Animation_d6tgn"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SpriteRoot/Head:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SpriteRoot/LowerHair:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -12)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SpriteRoot/AhogeRoot:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [-0.081489705]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SpriteRoot/AhogeRoot:position:y")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [-174.71036]
}

[sub_resource type="Animation" id="Animation_rpnd8"]
resource_name = "stand"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SpriteRoot/Head:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.46666664, 0.96666664),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -12), Vector2(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SpriteRoot/LowerHair:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.4667, 0.9667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -12), Vector2(0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SpriteRoot/AhogeRoot:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.041633345, 0.49996668, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [-0.081489705, 0.08203047484373328, -0.081489705]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SpriteRoot/AhogeRoot:position:y")
tracks/3/interp = 2
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.4667, 0.9667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [-163.0, -175.0, -163.0]
}

[sub_resource type="Animation" id="Animation_7vyk4"]
resource_name = "stand_2"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SpriteRoot/Head:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.36666667, 0.8),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -18), Vector2(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SpriteRoot/LowerHair:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.36670002, 0.8083667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -18), Vector2(0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SpriteRoot/AhogeRoot:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.36666667, 0.8),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.20420352248333637, 0.4625122517784973, 0.20420352248333637]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SpriteRoot/AhogeRoot:position:y")
tracks/3/interp = 2
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.3667, 0.8),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [-163.0, -175.0, -163.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_3wg1y"]
_data = {
&"RESET": SubResource("Animation_d6tgn"),
&"stand": SubResource("Animation_rpnd8"),
&"walk": SubResource("Animation_7vyk4")
}

[sub_resource type="Animation" id="Animation_a2luo"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SpriteRoot/Head/EyeOpen:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SpriteRoot/Head/EyeClosed:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_kmyvj"]
resource_name = "blinking"
length = 2.7
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SpriteRoot/Head/EyeOpen:modulate")
tracks/0/interp = 0
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.54, 0.69, 0.81),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SpriteRoot/Head/EyeClosed:modulate")
tracks/1/interp = 0
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.54, 0.69, 0.8333333),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_eir2k"]
_data = {
&"RESET": SubResource("Animation_a2luo"),
&"blinking": SubResource("Animation_kmyvj")
}

[sub_resource type="Animation" id="Animation_xhtjm"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SpriteRoot/Hands:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_jk2m4"]
resource_name = "standing"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SpriteRoot/Hands:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.54, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -14.999998), Vector2(0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_k4v7y"]
_data = {
&"RESET": SubResource("Animation_xhtjm"),
&"stand": SubResource("Animation_jk2m4")
}

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_d6tgn"]
bg_color = Color(0, 0, 0, 1)
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3wg1y"]
bg_color = Color(0.94579977, 0.9417809, 0.9419589, 1)
border_width_left = 4
border_width_top = 4
border_width_bottom = 4
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_kmyvj"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_a2luo"]
bg_color = Color(0.84003437, 0.0008719367, 0.8898385, 1)
border_color = Color(0, 0, 0, 1)
corner_detail = 4

[node name="Player" type="CharacterBody2D" groups=["Allied", "Player", "Unit"]]
collision_layer = 2
collision_mask = 47
script = ExtResource("1_rp718")

[node name="Shadow" type="Sprite2D" parent="."]
modulate = Color(1, 1, 1, 0.5529412)
position = Vector2(-1.9073486e-06, 54)
scale = Vector2(0.132, 0.132)
texture = ExtResource("2_3wg1y")

[node name="Selected" type="Sprite2D" parent="."]
visible = false
position = Vector2(0, 55.000008)
scale = Vector2(0.24452555, 0.24452555)
texture = ExtResource("2_d6tgn")

[node name="SpriteRoot" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_xhtjm")
scale = Vector2(0.165, 0.165)

[node name="LowerHair" type="Sprite2D" parent="SpriteRoot"]
position = Vector2(0, -12)
texture = ExtResource("3_d6tgn")

[node name="Body" type="Sprite2D" parent="SpriteRoot"]
position = Vector2(0, -10)
texture = ExtResource("4_3wg1y")

[node name="Head" type="Sprite2D" parent="SpriteRoot"]
texture = ExtResource("5_3wg1y")

[node name="EyeOpen" type="Sprite2D" parent="SpriteRoot/Head"]
texture = ExtResource("6_a2luo")

[node name="EyeClosed" type="Sprite2D" parent="SpriteRoot/Head"]
texture = ExtResource("7_eir2k")

[node name="AhogeRoot" type="Node2D" parent="SpriteRoot"]
position = Vector2(0, -174.71036)
rotation = -0.081489705
scale = Vector2(0.99999994, 0.99999994)

[node name="Ahoge" type="Sprite2D" parent="SpriteRoot/AhogeRoot"]
position = Vector2(-9.536743e-07, 169)
scale = Vector2(0.9999999, 0.9999999)
texture = ExtResource("8_kmyvj")

[node name="Hands" type="Node2D" parent="SpriteRoot"]

[node name="LeftHand" type="Sprite2D" parent="SpriteRoot/Hands"]
texture = ExtResource("9_a2luo")

[node name="RightHand" type="Sprite2D" parent="SpriteRoot/Hands"]
texture = ExtResource("10_eir2k")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 15)
shape = SubResource("CapsuleShape2D_3wg1y")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_3wg1y")
}
autoplay = "stand"
blend_times = [&"stand", &"walk", 1.0, &"walk", &"stand", 1.0]

[node name="BlinkingAnimation" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_eir2k")
}
autoplay = "blinking"

[node name="HandAnimation" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_k4v7y")
}
autoplay = "stand"

[node name="DamageBar" type="ProgressBar" parent="."]
z_index = 5
offset_left = -25.0
offset_top = -78.0
offset_right = 25.0
offset_bottom = -70.0
theme_override_styles/background = SubResource("StyleBoxFlat_d6tgn")
theme_override_styles/fill = SubResource("StyleBoxFlat_3wg1y")
value = 95.0
show_percentage = false

[node name="HealthBar" type="ProgressBar" parent="."]
z_index = 5
offset_left = -25.0
offset_top = -78.0
offset_right = 25.0
offset_bottom = -70.0
theme_override_styles/background = SubResource("StyleBoxEmpty_kmyvj")
theme_override_styles/fill = SubResource("StyleBoxFlat_a2luo")
value = 90.0
show_percentage = false

[node name="Timers" type="Node" parent="."]

[node name="HitFlashTimer" type="Timer" parent="Timers"]
wait_time = 0.15
one_shot = true
